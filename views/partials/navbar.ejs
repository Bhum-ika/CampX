<nav class="navbar sticky-top navbar-expand-lg" id="mainNavbar" style="background-color: rgba(255, 255, 255, 0.1); transition: background-color 0.3s ease-in-out, backdrop-filter 0.3s ease-in-out;">
    <div class="container-fluid d-flex justify-content-lg-start justify-content-center">
        <a class="navbar-brand mx-auto mx-lg-0" href="/" style="font-weight: bold; color: white; font-size: 2rem; text-align: center;" id="campxLogo">
            Camp<span id="rotateX" style="display: inline-block; animation: rotation 3s infinite; color: white;">X</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
            aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-link <%= currentPath === '/' ? 'active' : '' %>" href="/" style="color: rgba(255, 255, 255, 0.5); font-weight: 700; padding: 0.25rem 0; margin-left: 1rem; border-bottom: 0.25rem solid transparent;">&nbsp;Home</a>
                <a class="nav-link <%= currentPath === '/campgrounds' ? 'active' : '' %>" href="/campgrounds" style="color: rgba(255, 255, 255, 0.5); font-weight: 700; padding: 0.25rem 0; margin-left: 1rem; border-bottom: 0.25rem solid transparent;">Campgrounds</a>
                <a class="nav-link <%= currentPath === '/campgrounds/new' ? 'active' : '' %>" href="/campgrounds/new" style="color: rgba(255, 255, 255, 0.5); font-weight: 700; padding: 0.25rem 0; margin-left: 1rem; border-bottom: 0.25rem solid transparent;">New Campground</a>
            </div>
            <div class="navbar-nav ms-auto">
                <% if(!currentUser) { %>
                    <a class="nav-link <%= currentPath === '/login' ? 'active' : '' %>" href="/login" style="color: rgba(255, 255, 255, 0.5); font-weight: 700; padding: 0.25rem 0; margin-left: 1rem; border-bottom: 0.25rem solid transparent;">Login</a>
                    <a class="nav-link <%= currentPath === '/register' ? 'active' : '' %>" href="/register" style="color: rgba(255, 255, 255, 0.5); font-weight: 700; padding: 0.25rem 0; margin-left: 1rem; border-bottom: 0.25rem solid transparent;">Register</a>
                <% } else { %>
                    <a class="nav-link <%= currentPath === '/logout' ? 'active' : '' %>" href="/logout" style="color: rgba(255, 255, 255, 0.5); font-weight: 700; padding: 0.25rem 0; margin-left: 1rem; border-bottom: 0.25rem solid transparent;">Logout</a>
                <% } %>
            </div>
        </div>
    </div>
    <style>
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .navbar-brand {
                font-size: 1.5rem;
            }
        }

        .navbar-nav .nav-link {
            transition: border-bottom 0.3s ease, color 0.3s ease;
            border-bottom: 0.25rem solid transparent;
        }

        .navbar-nav .nav-link:hover {
            border-bottom: 0.25rem solid rgba(255, 255, 255, 0.5) !important;
        }

        .navbar-nav .nav-link.active {
            color: white !important;
            border-bottom: 0.25rem solid white !important;
        }

        .scrolled .nav-link {
            color: rgba(255, 255, 255, 0.7);
        }

        .scrolled .nav-link.active {
            color: white !important;
            border-bottom: 0.25rem solid white !important;
        }

        .scrolled .nav-link:hover {
            border-bottom: 0.25rem solid rgba(255, 255, 255, 0.7) !important;
        }

        .scrolled .nav-link.active:hover {
            border-bottom: 0.25rem solid white !important;
        }

        /* When navbar is scrolled, it gains a blur effect */
        .scrolled {
            background-color: rgba(255, 255, 255, 0.3) !important;
            backdrop-filter: blur(10px);
        }

        /* Initial state of navbar (transparent) */
        #mainNavbar {
            background-color: rgba(255, 255, 255, 0.1);
        }

    </style>
    <script>
        window.onscroll = function() {
            var navbar = document.getElementById("mainNavbar");

            // Add blur effect when scrolled past 50px
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        };
    </script>
</nav>
